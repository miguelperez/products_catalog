<% form_for [:admin, @product], :html => { :multipart => true } do |f| %>
  <%= f.error_messages %>
  
  <div class="form_field">
    <%= f.label :category_id %>
    <%= f.select :category_id, @categories.map{|category| [category.name, category.id]}, {:prompt => 'Select a category'} %>
  </div>
  
  <div class="form_field">
    <%= f.label :name %>
    <%= f.text_field :name%>
  </div>
  
  <div class="form_field">
    <%= f.label :description %>
    <%= f.text_area :description %>
  </div>
  
  <div class="form_field">
    <%= f.label :price %>
    <%= f.text_field :price %>
  </div>  

  <div class="form_field">
    <%= f.label :additional_information %>
    <%= f.text_area :additional_information %>
  </div>
  
  <div class="form_field">
     <% f.fields_for :images, ProductImage.new do |ff|%>
        <%= ff.label :graphic %>
        <%= ff.file_field :graphic %>
     <% end %>
  </div>

  <div class="form_field">
   <%= f.submit @product.new_record? ? "Create" : "Update" %>
   <%= link("Cancel", admin_products_path, 'cancel')%>
  </div>
<% end %>